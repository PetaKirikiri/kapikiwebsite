{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { sendEmail, handleAuthCallback } from './emailService';\nconst OAuthCallback = () => {\n  _s();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const handleCallback = async () => {\n      try {\n        const urlParams = new URLSearchParams(window.location.search);\n        const code = urlParams.get('code');\n        if (!code) {\n          throw new Error('No authorization code received');\n        }\n\n        // Get the stored return path or default to /clients\n        const returnPath = localStorage.getItem('emailAuthReturnTo') || '/clients';\n        console.log('Returning to path:', returnPath);\n\n        // Exchange the code for tokens\n        await handleAuthCallback(code);\n\n        // Clear the stored path\n        localStorage.removeItem('emailAuthReturnTo');\n\n        // Navigate to the return path\n        navigate(returnPath);\n      } catch (error) {\n        console.error('OAuth callback error:', error);\n        navigate('/clients');\n      }\n    };\n    handleCallback();\n  }, [navigate]);\n  return null; // This component doesn't render anything\n};\n_s(OAuthCallback, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n_c = OAuthCallback;\nexport default OAuthCallback;\nvar _c;\n$RefreshReg$(_c, \"OAuthCallback\");","map":{"version":3,"names":["React","useEffect","useNavigate","sendEmail","handleAuthCallback","OAuthCallback","_s","navigate","handleCallback","urlParams","URLSearchParams","window","location","search","code","get","Error","returnPath","localStorage","getItem","console","log","removeItem","error","_c","$RefreshReg$"],"sources":["/Users/petakirikiri/Coding/Ka Piki/src/services/oauthCallback.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { sendEmail, handleAuthCallback } from './emailService';\n\nconst OAuthCallback = () => {\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const handleCallback = async () => {\n      try {\n        const urlParams = new URLSearchParams(window.location.search);\n        const code = urlParams.get('code');\n        \n        if (!code) {\n          throw new Error('No authorization code received');\n        }\n\n        // Get the stored return path or default to /clients\n        const returnPath = localStorage.getItem('emailAuthReturnTo') || '/clients';\n        console.log('Returning to path:', returnPath);\n\n        // Exchange the code for tokens\n        await handleAuthCallback(code);\n        \n        // Clear the stored path\n        localStorage.removeItem('emailAuthReturnTo');\n        \n        // Navigate to the return path\n        navigate(returnPath);\n      } catch (error) {\n        console.error('OAuth callback error:', error);\n        navigate('/clients');\n      }\n    };\n\n    handleCallback();\n  }, [navigate]);\n\n  return null; // This component doesn't render anything\n};\n\nexport default OAuthCallback; "],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,EAAEC,kBAAkB,QAAQ,gBAAgB;AAE9D,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAMC,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,MAAMO,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjC,IAAI;QACF,MAAMC,SAAS,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;QAC7D,MAAMC,IAAI,GAAGL,SAAS,CAACM,GAAG,CAAC,MAAM,CAAC;QAElC,IAAI,CAACD,IAAI,EAAE;UACT,MAAM,IAAIE,KAAK,CAAC,gCAAgC,CAAC;QACnD;;QAEA;QACA,MAAMC,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC,IAAI,UAAU;QAC1EC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEJ,UAAU,CAAC;;QAE7C;QACA,MAAMb,kBAAkB,CAACU,IAAI,CAAC;;QAE9B;QACAI,YAAY,CAACI,UAAU,CAAC,mBAAmB,CAAC;;QAE5C;QACAf,QAAQ,CAACU,UAAU,CAAC;MACtB,CAAC,CAAC,OAAOM,KAAK,EAAE;QACdH,OAAO,CAACG,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7ChB,QAAQ,CAAC,UAAU,CAAC;MACtB;IACF,CAAC;IAEDC,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACD,QAAQ,CAAC,CAAC;EAEd,OAAO,IAAI,CAAC,CAAC;AACf,CAAC;AAACD,EAAA,CAnCID,aAAa;EAAA,QACAH,WAAW;AAAA;AAAAsB,EAAA,GADxBnB,aAAa;AAqCnB,eAAeA,aAAa;AAAC,IAAAmB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}