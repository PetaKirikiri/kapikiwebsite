[debug] [2025-04-07T16:16:25.338Z] ----------------------------------------------------------------------
[debug] [2025-04-07T16:16:25.340Z] Command:       /usr/local/bin/node /usr/local/bin/firebase emulators:start
[debug] [2025-04-07T16:16:25.340Z] CLI Version:   14.1.0
[debug] [2025-04-07T16:16:25.340Z] Platform:      darwin
[debug] [2025-04-07T16:16:25.340Z] Node Version:  v20.14.0
[debug] [2025-04-07T16:16:25.340Z] Time:          Mon Apr 07 2025 23:16:25 GMT+0700 (Indochina Time)
[debug] [2025-04-07T16:16:25.340Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-04-07T16:16:25.449Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-04-07T16:16:25.449Z] > authorizing via signed-in user (peta@kapiki.co.nz)
[info] i  emulators: Starting emulators: functions, extensions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions, extensions"}}
[debug] [2025-04-07T16:16:25.451Z] Checked if tokens are valid: true, expires at: 1744044371650
[debug] [2025-04-07T16:16:25.451Z] Checked if tokens are valid: true, expires at: 1744044371650
[debug] [2025-04-07T16:16:25.452Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/kapikiwebsite [none]
[debug] [2025-04-07T16:16:26.720Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/kapikiwebsite 200
[debug] [2025-04-07T16:16:26.720Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/kapikiwebsite {"projectNumber":"76009382654","projectId":"kapikiwebsite","lifecycleState":"ACTIVE","name":"KaPikiWebsite","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-04-06T01:05:10.805533Z","parent":{"type":"organization","id":"1027184580429"}}
[debug] [2025-04-07T16:16:26.959Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-04-07T16:16:26.959Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-04-07T16:16:26.962Z] [hub] writing locator at /var/folders/vz/_7pwhrmx4715_m19cx4x59th0000gn/T/hub-kapikiwebsite.json
[debug] [2025-04-07T16:16:26.964Z] [Extensions] Started Extensions emulator, this is a noop.
[debug] [2025-04-07T16:16:27.183Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-04-07T16:16:27.183Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-04-07T16:16:27.183Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-04-07T16:16:27.183Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, auth, firestore, database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mapphosting, auth, firestore, database, hosting, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2025-04-07T16:16:27.187Z] defaultcredentials: writing to file /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json
[debug] [2025-04-07T16:16:27.189Z] Setting GAC to /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json"}}
[debug] [2025-04-07T16:16:27.189Z] Checked if tokens are valid: true, expires at: 1744044371650
[debug] [2025-04-07T16:16:27.189Z] Checked if tokens are valid: true, expires at: 1744044371650
[debug] [2025-04-07T16:16:27.189Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/kapikiwebsite/adminSdkConfig [none]
[debug] [2025-04-07T16:16:28.014Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/kapikiwebsite/adminSdkConfig 200
[debug] [2025-04-07T16:16:28.015Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/kapikiwebsite/adminSdkConfig {"projectId":"kapikiwebsite","storageBucket":"kapikiwebsite.firebasestorage.app"}
[debug] [2025-04-07T16:16:28.038Z] [Extensions] Connecting Extensions emulator, this is a noop.
[info] i  functions: Watching "/Users/petakirikiri/Coding/Ka Piki/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/petakirikiri/Coding/Ka Piki/functions\" for Cloud Functions..."}}
[debug] [2025-04-07T16:16:28.044Z] Validating nodejs source
[debug] [2025-04-07T16:16:28.479Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "echo 'Skipping lint'",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "firebase-admin": "^13.2.0",
    "firebase-functions": "^6.3.2",
    "googleapis": "^128.0.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-04-07T16:16:28.480Z] Building nodejs source
[debug] [2025-04-07T16:16:28.480Z] Failed to find version of module node: reached end of search path /Users/petakirikiri/Coding/Ka Piki/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2025-04-07T16:16:28.481Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-04-07T16:16:28.484Z] Found firebase-functions binary at '/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8982

[debug] [2025-04-07T16:16:28.830Z] Got response from /__/functions.yaml {"endpoints":{"sendEmail":{"availableMemoryMb":256,"timeoutSeconds":null,"minInstances":0,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"labels":{},"callableTrigger":{},"entryPoint":"sendEmail"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2025-04-07T16:16:33.856Z] defaultcredentials: writing to file /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json
[debug] [2025-04-07T16:16:33.857Z] Setting GAC to /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json"}}
[info] ✔  functions: Loaded functions definitions from source: sendEmail. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sendEmail."}}
[info] ✔  functions[us-central1-sendEmail]: http function initialized (http://127.0.0.1:5001/kapikiwebsite/us-central1/sendEmail). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/kapikiwebsite/us-central1/sendEmail)."}}
[debug] [2025-04-07T16:16:33.865Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────┬────────────────┬──────────────────────────────────┐
│ Emulator   │ Host:Port      │ View in Emulator UI              │
├────────────┼────────────────┼──────────────────────────────────┤
│ Functions  │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions  │
├────────────┼────────────────┼──────────────────────────────────┤
│ Extensions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/extensions │
└────────────┴────────────────┴──────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500
┌─────────────────────────┬───────────────┬─────────────────────┐
│ Extension Instance Name │ Extension Ref │ View in Emulator UI │
└─────────────────────────┴───────────────┴─────────────────────┘
Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2025-04-07T16:16:45.861Z] [work-queue] {"queuedWork":["/kapikiwebsite/us-central1/sendEmail-2025-04-07T16:16:45.861Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-07T16:16:45.861Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/kapikiwebsite/us-central1/sendEmail-2025-04-07T16:16:45.861Z"],"workRunningCount":1}
[debug] [2025-04-07T16:16:45.862Z] Accepted request OPTIONS /kapikiwebsite/us-central1/sendEmail --> us-central1-sendEmail
[debug] [2025-04-07T16:16:45.865Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-07T16:16:45.866Z] [functions] Got req.url=/kapikiwebsite/us-central1/sendEmail, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/kapikiwebsite/us-central1/sendEmail, mapping to path=/"}}
[debug] [2025-04-07T16:16:45.869Z] [worker-pool] addWorker(us-central1-sendEmail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendEmail)"}}
[debug] [2025-04-07T16:16:45.871Z] [worker-pool] Adding worker with key us-central1-sendEmail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendEmail, total=1"}}
[debug] [2025-04-07T16:16:46.177Z] [runtime-status] [7611] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.2.0","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.2.0\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-07T16:16:46.177Z] [runtime-status] [7611] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-04-07T16:16:46.177Z] [runtime-status] [7611] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-04-07T16:16:46.177Z] [runtime-status] [7611] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-04-07T16:16:46.243Z] [runtime-status] [7611] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-04-07T16:16:46.244Z] [runtime-status] [7611] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-04-07T16:16:46.244Z] [runtime-status] [7611] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-04-07T16:16:46.246Z] [runtime-status] [7611] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.2.0","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.2.0\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-07T16:16:46.247Z] [runtime-status] [7611] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-04-07T16:16:46.247Z] [runtime-status] [7611] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.2.0","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.2.0\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-04-07T16:16:46.446Z] [runtime-status] [7611] Functions runtime initialized. {"cwd":"/Users/petakirikiri/Coding/Ka Piki/functions","node_version":"20.14.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] Functions runtime initialized. {\"cwd\":\"/Users/petakirikiri/Coding/Ka Piki/functions\",\"node_version\":\"20.14.0\"}"}}
[debug] [2025-04-07T16:16:46.446Z] [runtime-status] [7611] Listening to port: /var/folders/vz/_7pwhrmx4715_m19cx4x59th0000gn/T/fire_emu_a6f4e2e1e00ee056.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7611] Listening to port: /var/folders/vz/_7pwhrmx4715_m19cx4x59th0000gn/T/fire_emu_a6f4e2e1e00ee056.sock"}}
[debug] [2025-04-07T16:16:46.483Z] [worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: IDLE"}}
[debug] [2025-04-07T16:16:46.483Z] [worker-pool] submitRequest(triggerId=us-central1-sendEmail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sendEmail)"}}
[info] i  functions: Beginning execution of "us-central1-sendEmail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Beginning execution of \"us-central1-sendEmail\""}}
[debug] [2025-04-07T16:16:46.483Z] [worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: BUSY"}}
[debug] [2025-04-07T16:16:46.485Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sendEmail" in 1.621375ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finished \"us-central1-sendEmail\" in 1.621375ms"}}
[debug] [2025-04-07T16:16:46.485Z] [worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: IDLE"}}
[debug] [2025-04-07T16:16:46.485Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-07T16:16:46.485Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-07T16:16:46.485Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-07T16:16:46.486Z] [work-queue] {"queuedWork":["/kapikiwebsite/us-central1/sendEmail-2025-04-07T16:16:46.486Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-07T16:16:46.486Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/kapikiwebsite/us-central1/sendEmail-2025-04-07T16:16:46.486Z"],"workRunningCount":1}
[debug] [2025-04-07T16:16:46.486Z] Accepted request POST /kapikiwebsite/us-central1/sendEmail --> us-central1-sendEmail
[debug] [2025-04-07T16:16:46.487Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-07T16:16:46.487Z] [functions] Got req.url=/kapikiwebsite/us-central1/sendEmail, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/kapikiwebsite/us-central1/sendEmail, mapping to path=/"}}
[debug] [2025-04-07T16:16:46.487Z] [worker-pool] submitRequest(triggerId=us-central1-sendEmail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sendEmail)"}}
[info] i  functions: Beginning execution of "us-central1-sendEmail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Beginning execution of \"us-central1-sendEmail\""}}
[debug] [2025-04-07T16:16:46.487Z] [worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  {"data":{"to":["peta@kapiki.co.nz"],"subject":"Test","body":"Test"},"auth":{"uid":"aaUawrkoZUZIz7ATCcrVmTVt68m1","token":{"iss":"https://securetoken.google.com/kapikiwebsite","aud":"kapikiwebsite","auth_time":1744030614,"user_id":"aaUawrkoZUZIz7ATCcrVmTVt68m1","sub":"aaUawrkoZUZIz7ATCcrVmTVt68m1","iat":1744040914,"exp":1744044514,"email":"peta@kapiki.co.nz","email_verified":false,"firebase":{"identities":{"email":["peta@kapiki.co.nz"]},"sign_in_provider":"password"},"uid":"aaUawrkoZUZIz7ATCcrVmTVt68m1"}},"headers":{"host":"localhost:5001","connection":"keep-alive","content-length":"68","sec-ch-ua-platform":"\"macOS\"","authorization":"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjcxMTE1MjM1YTZjNjE0NTRlZmRlZGM0NWE3N2U0MzUxMzY3ZWViZTAiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20va2FwaWtpd2Vic2l0ZSIsImF1ZCI6ImthcGlraXdlYnNpdGUiLCJhdXRoX3RpbWUiOjE3NDQwMzA2MTQsInVzZXJfaWQiOiJhYVVhd3Jrb1pVWkl6N0FUQ2NyVm1UVnQ2OG0xIiwic3ViIjoiYWFVYXdya29aVVpJejdBVENjclZtVFZ0NjhtMSIsImlhdCI6MTc0NDA0MDkxNCwiZXhwIjoxNzQ0MDQ0NTE0LCJlbWFpbCI6InBldGFAa2FwaWtpLmNvLm56IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbInBldGFAa2FwaWtpLmNvLm56Il19LCJzaWduX2luX3Byb3ZpZGVyIjoicGFzc3dvcmQifX0.mhrpP28rcGH6E19aZUOxOnX54NEKlHs1dM00nDX5HtDAwSh2H8rHutqxT1DpiY4bFWHwgZ4pTvj8anDJlA9mCN8znB9KMBe1T76uc5ZwsuYMvpd-FP3ctftVrsWfKAo6BN2E0ZwZSc6a7WFrkdBd7yJakmR4iClVviIpHtWDst3r_WYvyUtvg03WM1GOKD6nwoxndhfJDfI7eSE0iH34kb2xNxyzAmyWasTbvNC1S1QraxAYiNsq7mDvefuQDwKWvoXUtLyjGn850nAtrxqGEULR_HPwK7Yu5Z1lqJ017YvbIDMTDddoC_cwZXdj_Z4UrFrVB_GiUXN_E-ZH8Xlh8w","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36","sec-ch-ua":"\"Chromium\";v=\"134\", \"Not:A-Brand\";v=\"24\", \"Google Chrome\";v=\"134\"","content-type":"application/json","sec-ch-ua-mobile":"?0","accept":"*/*","origin":"http://localhost:3000","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:3000/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-GB,en-US;q=0.9,en;q=0.8"},"origin":"http://localhost:3000","method":"POST","severity":"INFO","message":"Email function called"} {"user":{"data":{"to":["peta@kapiki.co.nz"],"subject":"Test","body":"Test"},"auth":{"uid":"aaUawrkoZUZIz7ATCcrVmTVt68m1","token":{"iss":"https://securetoken.google.com/kapikiwebsite","aud":"kapikiwebsite","auth_time":1744030614,"user_id":"aaUawrkoZUZIz7ATCcrVmTVt68m1","sub":"aaUawrkoZUZIz7ATCcrVmTVt68m1","iat":1744040914,"exp":1744044514,"email":"peta@kapiki.co.nz","email_verified":false,"firebase":{"identities":{"email":["peta@kapiki.co.nz"]},"sign_in_provider":"password"},"uid":"aaUawrkoZUZIz7ATCcrVmTVt68m1"}},"headers":{"host":"localhost:5001","connection":"keep-alive","content-length":"68","sec-ch-ua-platform":"\"macOS\"","authorization":"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjcxMTE1MjM1YTZjNjE0NTRlZmRlZGM0NWE3N2U0MzUxMzY3ZWViZTAiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20va2FwaWtpd2Vic2l0ZSIsImF1ZCI6ImthcGlraXdlYnNpdGUiLCJhdXRoX3RpbWUiOjE3NDQwMzA2MTQsInVzZXJfaWQiOiJhYVVhd3Jrb1pVWkl6N0FUQ2NyVm1UVnQ2OG0xIiwic3ViIjoiYWFVYXdya29aVVpJejdBVENjclZtVFZ0NjhtMSIsImlhdCI6MTc0NDA0MDkxNCwiZXhwIjoxNzQ0MDQ0NTE0LCJlbWFpbCI6InBldGFAa2FwaWtpLmNvLm56IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbInBldGFAa2FwaWtpLmNvLm56Il19LCJzaWduX2luX3Byb3ZpZGVyIjoicGFzc3dvcmQifX0.mhrpP28rcGH6E19aZUOxOnX54NEKlHs1dM00nDX5HtDAwSh2H8rHutqxT1DpiY4bFWHwgZ4pTvj8anDJlA9mCN8znB9KMBe1T76uc5ZwsuYMvpd-FP3ctftVrsWfKAo6BN2E0ZwZSc6a7WFrkdBd7yJakmR4iClVviIpHtWDst3r_WYvyUtvg03WM1GOKD6nwoxndhfJDfI7eSE0iH34kb2xNxyzAmyWasTbvNC1S1QraxAYiNsq7mDvefuQDwKWvoXUtLyjGn850nAtrxqGEULR_HPwK7Yu5Z1lqJ017YvbIDMTDddoC_cwZXdj_Z4UrFrVB_GiUXN_E-ZH8Xlh8w","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36","sec-ch-ua":"\"Chromium\";v=\"134\", \"Not:A-Brand\";v=\"24\", \"Google Chrome\";v=\"134\"","content-type":"application/json","sec-ch-ua-mobile":"?0","accept":"*/*","origin":"http://localhost:3000","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:3000/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-GB,en-US;q=0.9,en;q=0.8"},"origin":"http://localhost:3000","method":"POST","severity":"INFO","message":"Email function called"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"to\":[\"peta@kapiki.co.nz\"],\"subject\":\"Test\",\"body\":\"Test\"},\"auth\":{\"uid\":\"aaUawrkoZUZIz7ATCcrVmTVt68m1\",\"token\":{\"iss\":\"https://securetoken.google.com/kapikiwebsite\",\"aud\":\"kapikiwebsite\",\"auth_time\":1744030614,\"user_id\":\"aaUawrkoZUZIz7ATCcrVmTVt68m1\",\"sub\":\"aaUawrkoZUZIz7ATCcrVmTVt68m1\",\"iat\":1744040914,\"exp\":1744044514,\"email\":\"peta@kapiki.co.nz\",\"email_verified\":false,\"firebase\":{\"identities\":{\"email\":[\"peta@kapiki.co.nz\"]},\"sign_in_provider\":\"password\"},\"uid\":\"aaUawrkoZUZIz7ATCcrVmTVt68m1\"}},\"headers\":{\"host\":\"localhost:5001\",\"connection\":\"keep-alive\",\"content-length\":\"68\",\"sec-ch-ua-platform\":\"\\\"macOS\\\"\",\"authorization\":\"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjcxMTE1MjM1YTZjNjE0NTRlZmRlZGM0NWE3N2U0MzUxMzY3ZWViZTAiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20va2FwaWtpd2Vic2l0ZSIsImF1ZCI6ImthcGlraXdlYnNpdGUiLCJhdXRoX3RpbWUiOjE3NDQwMzA2MTQsInVzZXJfaWQiOiJhYVVhd3Jrb1pVWkl6N0FUQ2NyVm1UVnQ2OG0xIiwic3ViIjoiYWFVYXdya29aVVpJejdBVENjclZtVFZ0NjhtMSIsImlhdCI6MTc0NDA0MDkxNCwiZXhwIjoxNzQ0MDQ0NTE0LCJlbWFpbCI6InBldGFAa2FwaWtpLmNvLm56IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbInBldGFAa2FwaWtpLmNvLm56Il19LCJzaWduX2luX3Byb3ZpZGVyIjoicGFzc3dvcmQifX0.mhrpP28rcGH6E19aZUOxOnX54NEKlHs1dM00nDX5HtDAwSh2H8rHutqxT1DpiY4bFWHwgZ4pTvj8anDJlA9mCN8znB9KMBe1T76uc5ZwsuYMvpd-FP3ctftVrsWfKAo6BN2E0ZwZSc6a7WFrkdBd7yJakmR4iClVviIpHtWDst3r_WYvyUtvg03WM1GOKD6nwoxndhfJDfI7eSE0iH34kb2xNxyzAmyWasTbvNC1S1QraxAYiNsq7mDvefuQDwKWvoXUtLyjGn850nAtrxqGEULR_HPwK7Yu5Z1lqJ017YvbIDMTDddoC_cwZXdj_Z4UrFrVB_GiUXN_E-ZH8Xlh8w\",\"user-agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\",\"sec-ch-ua\":\"\\\"Chromium\\\";v=\\\"134\\\", \\\"Not:A-Brand\\\";v=\\\"24\\\", \\\"Google Chrome\\\";v=\\\"134\\\"\",\"content-type\":\"application/json\",\"sec-ch-ua-mobile\":\"?0\",\"accept\":\"*/*\",\"origin\":\"http://localhost:3000\",\"sec-fetch-site\":\"same-site\",\"sec-fetch-mode\":\"cors\",\"sec-fetch-dest\":\"empty\",\"referer\":\"http://localhost:3000/\",\"accept-encoding\":\"gzip, deflate, br, zstd\",\"accept-language\":\"en-GB,en-US;q=0.9,en;q=0.8\"},\"origin\":\"http://localhost:3000\",\"method\":\"POST\",\"severity\":\"INFO\",\"message\":\"Email function called\"}"}}
[info] >  {"to":["peta@kapiki.co.nz"],"subject":"Test","bodyLength":4,"auth":"aaUawrkoZUZIz7ATCcrVmTVt68m1","severity":"INFO","message":"Preparing to send email"} {"user":{"to":["peta@kapiki.co.nz"],"subject":"Test","bodyLength":4,"auth":"aaUawrkoZUZIz7ATCcrVmTVt68m1","severity":"INFO","message":"Preparing to send email"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"to\":[\"peta@kapiki.co.nz\"],\"subject\":\"Test\",\"bodyLength\":4,\"auth\":\"aaUawrkoZUZIz7ATCcrVmTVt68m1\",\"severity\":\"INFO\",\"message\":\"Preparing to send email\"}"}}
[info] >  {"severity":"INFO","message":"Sending email via Gmail API"} {"user":{"severity":"INFO","message":"Sending email via Gmail API"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Sending email via Gmail API\"}"}}
[info] >  {"to":["peta@kapiki.co.nz"],"from":"kiaora@kapiki.co.nz","subject":"Test","body":"Test","severity":"INFO","message":"DEVELOPMENT MODE - Email would be sent:"} {"user":{"to":["peta@kapiki.co.nz"],"from":"kiaora@kapiki.co.nz","subject":"Test","body":"Test","severity":"INFO","message":"DEVELOPMENT MODE - Email would be sent:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"to\":[\"peta@kapiki.co.nz\"],\"from\":\"kiaora@kapiki.co.nz\",\"subject\":\"Test\",\"body\":\"Test\",\"severity\":\"INFO\",\"message\":\"DEVELOPMENT MODE - Email would be sent:\"}"}}
[debug] [2025-04-07T16:16:46.493Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sendEmail" in 6.146708ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finished \"us-central1-sendEmail\" in 6.146708ms"}}
[debug] [2025-04-07T16:16:46.493Z] [worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: IDLE"}}
[debug] [2025-04-07T16:16:46.493Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-07T16:16:46.493Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-07T16:16:46.493Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-07T16:19:34.827Z] File /Users/petakirikiri/Coding/Ka Piki/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/petakirikiri/Coding/Ka Piki/functions/index.js changed, reloading triggers"}}
[debug] [2025-04-07T16:19:35.829Z] Validating nodejs source
[debug] [2025-04-07T16:19:36.354Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "echo 'Skipping lint'",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "firebase-admin": "^13.2.0",
    "firebase-functions": "^6.3.2",
    "googleapis": "^128.0.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-04-07T16:19:36.354Z] Building nodejs source
[debug] [2025-04-07T16:19:36.354Z] Failed to find version of module node: reached end of search path /Users/petakirikiri/Coding/Ka Piki/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2025-04-07T16:19:36.354Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-04-07T16:19:36.355Z] Found firebase-functions binary at '/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8372

[debug] [2025-04-07T16:19:37.048Z] Got response from /__/functions.yaml {"endpoints":{"sendEmail":{"availableMemoryMb":256,"timeoutSeconds":null,"minInstances":0,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"labels":{},"callableTrigger":{},"entryPoint":"sendEmail"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2025-04-07T16:19:37.665Z] File /Users/petakirikiri/Coding/Ka Piki/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/petakirikiri/Coding/Ka Piki/functions/index.js changed, reloading triggers"}}
[debug] [2025-04-07T16:19:38.667Z] Validating nodejs source
[debug] [2025-04-07T16:19:39.144Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "echo 'Skipping lint'",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "firebase-admin": "^13.2.0",
    "firebase-functions": "^6.3.2",
    "googleapis": "^128.0.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-04-07T16:19:39.145Z] Building nodejs source
[debug] [2025-04-07T16:19:39.145Z] Failed to find version of module node: reached end of search path /Users/petakirikiri/Coding/Ka Piki/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2025-04-07T16:19:39.145Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-04-07T16:19:39.146Z] Found firebase-functions binary at '/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8599

[debug] [2025-04-07T16:19:39.497Z] Got response from /__/functions.yaml {"endpoints":{"sendEmail":{"availableMemoryMb":256,"timeoutSeconds":null,"minInstances":0,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"labels":{},"callableTrigger":{},"entryPoint":"sendEmail"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2025-04-07T16:19:42.067Z] defaultcredentials: writing to file /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json
[debug] [2025-04-07T16:19:42.068Z] Setting GAC to /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json"}}
[info] ✔  functions: Loaded functions definitions from source: sendEmail. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sendEmail."}}
[debug] [2025-04-07T16:19:42.068Z] [worker-pool] Shutting down IDLE worker (us-central1-sendEmail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-sendEmail)"}}
[debug] [2025-04-07T16:19:42.069Z] [worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: FINISHING"}}
[debug] [2025-04-07T16:19:42.075Z] [worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: exited"}}
[debug] [2025-04-07T16:19:42.075Z] [worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-95f15411-bbbd-4f77-8c1f-236d6004e9f2]: FINISHED"}}
[debug] [2025-04-07T16:19:44.521Z] defaultcredentials: writing to file /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json
[debug] [2025-04-07T16:19:44.522Z] Setting GAC to /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/petakirikiri/.config/firebase/peta_kapiki_co.nz_application_default_credentials.json"}}
[info] ✔  functions: Loaded functions definitions from source: sendEmail. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sendEmail."}}
[debug] [2025-04-07T16:19:55.906Z] [work-queue] {"queuedWork":["/kapikiwebsite/us-central1/sendEmail-2025-04-07T16:19:55.906Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-07T16:19:55.907Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/kapikiwebsite/us-central1/sendEmail-2025-04-07T16:19:55.906Z"],"workRunningCount":1}
[debug] [2025-04-07T16:19:55.907Z] Accepted request OPTIONS /kapikiwebsite/us-central1/sendEmail --> us-central1-sendEmail
[debug] [2025-04-07T16:19:55.911Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-07T16:19:55.912Z] [functions] Got req.url=/kapikiwebsite/us-central1/sendEmail, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/kapikiwebsite/us-central1/sendEmail, mapping to path=/"}}
[debug] [2025-04-07T16:19:55.912Z] [worker-pool] Cleaned up workers for us-central1-sendEmail: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sendEmail: 1 --> 0"}}
[debug] [2025-04-07T16:19:55.914Z] [worker-pool] addWorker(us-central1-sendEmail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sendEmail)"}}
[debug] [2025-04-07T16:19:55.914Z] [worker-pool] Adding worker with key us-central1-sendEmail, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sendEmail, total=1"}}
[debug] [2025-04-07T16:19:56.570Z] [runtime-status] [7829] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.2.0","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.2.0\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-07T16:19:56.570Z] [runtime-status] [7829] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-04-07T16:19:56.571Z] [runtime-status] [7829] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-04-07T16:19:56.571Z] [runtime-status] [7829] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-04-07T16:19:56.638Z] [runtime-status] [7829] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-04-07T16:19:56.638Z] [runtime-status] [7829] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-04-07T16:19:56.638Z] [runtime-status] [7829] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-04-07T16:19:56.641Z] [runtime-status] [7829] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.2.0","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.2.0\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-07T16:19:56.642Z] [runtime-status] [7829] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-04-07T16:19:56.642Z] [runtime-status] [7829] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.2.0","resolution":"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.2.0\",\"resolution\":\"/Users/petakirikiri/Coding/Ka Piki/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-04-07T16:19:56.836Z] [runtime-status] [7829] Functions runtime initialized. {"cwd":"/Users/petakirikiri/Coding/Ka Piki/functions","node_version":"20.14.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] Functions runtime initialized. {\"cwd\":\"/Users/petakirikiri/Coding/Ka Piki/functions\",\"node_version\":\"20.14.0\"}"}}
[debug] [2025-04-07T16:19:56.836Z] [runtime-status] [7829] Listening to port: /var/folders/vz/_7pwhrmx4715_m19cx4x59th0000gn/T/fire_emu_a97590b69f46c94f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[runtime-status] [7829] Listening to port: /var/folders/vz/_7pwhrmx4715_m19cx4x59th0000gn/T/fire_emu_a97590b69f46c94f.sock"}}
[debug] [2025-04-07T16:19:56.932Z] [worker-us-central1-sendEmail-e4b3fdb6-6fd6-4269-b2b0-04323f101e44]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-e4b3fdb6-6fd6-4269-b2b0-04323f101e44]: IDLE"}}
[debug] [2025-04-07T16:19:56.932Z] [worker-pool] submitRequest(triggerId=us-central1-sendEmail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sendEmail)"}}
[info] i  functions: Beginning execution of "us-central1-sendEmail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Beginning execution of \"us-central1-sendEmail\""}}
[debug] [2025-04-07T16:19:56.932Z] [worker-us-central1-sendEmail-e4b3fdb6-6fd6-4269-b2b0-04323f101e44]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-e4b3fdb6-6fd6-4269-b2b0-04323f101e44]: BUSY"}}
[debug] [2025-04-07T16:19:56.934Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sendEmail" in 1.916333ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finished \"us-central1-sendEmail\" in 1.916333ms"}}
[debug] [2025-04-07T16:19:56.934Z] [worker-us-central1-sendEmail-e4b3fdb6-6fd6-4269-b2b0-04323f101e44]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-e4b3fdb6-6fd6-4269-b2b0-04323f101e44]: IDLE"}}
[debug] [2025-04-07T16:19:56.934Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-07T16:19:56.934Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-07T16:19:56.935Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-07T16:19:56.936Z] [work-queue] {"queuedWork":["/kapikiwebsite/us-central1/sendEmail-2025-04-07T16:19:56.936Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-07T16:19:56.936Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/kapikiwebsite/us-central1/sendEmail-2025-04-07T16:19:56.936Z"],"workRunningCount":1}
[debug] [2025-04-07T16:19:56.936Z] Accepted request POST /kapikiwebsite/us-central1/sendEmail --> us-central1-sendEmail
[debug] [2025-04-07T16:19:56.936Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-07T16:19:56.937Z] [functions] Got req.url=/kapikiwebsite/us-central1/sendEmail, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/kapikiwebsite/us-central1/sendEmail, mapping to path=/"}}
[debug] [2025-04-07T16:19:56.937Z] [worker-pool] submitRequest(triggerId=us-central1-sendEmail) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sendEmail)"}}
[info] i  functions: Beginning execution of "us-central1-sendEmail" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Beginning execution of \"us-central1-sendEmail\""}}
[debug] [2025-04-07T16:19:56.937Z] [worker-us-central1-sendEmail-e4b3fdb6-6fd6-4269-b2b0-04323f101e44]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-e4b3fdb6-6fd6-4269-b2b0-04323f101e44]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  {"data":{"to":["peta@kapiki.co.nz"],"subject":"Test","body":"Test"},"auth":{"uid":"aaUawrkoZUZIz7ATCcrVmTVt68m1","token":{"iss":"https://securetoken.google.com/kapikiwebsite","aud":"kapikiwebsite","auth_time":1744030614,"user_id":"aaUawrkoZUZIz7ATCcrVmTVt68m1","sub":"aaUawrkoZUZIz7ATCcrVmTVt68m1","iat":1744040914,"exp":1744044514,"email":"peta@kapiki.co.nz","email_verified":false,"firebase":{"identities":{"email":["peta@kapiki.co.nz"]},"sign_in_provider":"password"},"uid":"aaUawrkoZUZIz7ATCcrVmTVt68m1"}},"headers":{"host":"localhost:5001","connection":"keep-alive","content-length":"68","sec-ch-ua-platform":"\"macOS\"","authorization":"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjcxMTE1MjM1YTZjNjE0NTRlZmRlZGM0NWE3N2U0MzUxMzY3ZWViZTAiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20va2FwaWtpd2Vic2l0ZSIsImF1ZCI6ImthcGlraXdlYnNpdGUiLCJhdXRoX3RpbWUiOjE3NDQwMzA2MTQsInVzZXJfaWQiOiJhYVVhd3Jrb1pVWkl6N0FUQ2NyVm1UVnQ2OG0xIiwic3ViIjoiYWFVYXdya29aVVpJejdBVENjclZtVFZ0NjhtMSIsImlhdCI6MTc0NDA0MDkxNCwiZXhwIjoxNzQ0MDQ0NTE0LCJlbWFpbCI6InBldGFAa2FwaWtpLmNvLm56IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbInBldGFAa2FwaWtpLmNvLm56Il19LCJzaWduX2luX3Byb3ZpZGVyIjoicGFzc3dvcmQifX0.mhrpP28rcGH6E19aZUOxOnX54NEKlHs1dM00nDX5HtDAwSh2H8rHutqxT1DpiY4bFWHwgZ4pTvj8anDJlA9mCN8znB9KMBe1T76uc5ZwsuYMvpd-FP3ctftVrsWfKAo6BN2E0ZwZSc6a7WFrkdBd7yJakmR4iClVviIpHtWDst3r_WYvyUtvg03WM1GOKD6nwoxndhfJDfI7eSE0iH34kb2xNxyzAmyWasTbvNC1S1QraxAYiNsq7mDvefuQDwKWvoXUtLyjGn850nAtrxqGEULR_HPwK7Yu5Z1lqJ017YvbIDMTDddoC_cwZXdj_Z4UrFrVB_GiUXN_E-ZH8Xlh8w","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36","sec-ch-ua":"\"Chromium\";v=\"134\", \"Not:A-Brand\";v=\"24\", \"Google Chrome\";v=\"134\"","content-type":"application/json","sec-ch-ua-mobile":"?0","accept":"*/*","origin":"http://localhost:3000","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:3000/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-GB,en-US;q=0.9,en;q=0.8"},"origin":"http://localhost:3000","method":"POST","severity":"INFO","message":"Email function called"} {"user":{"data":{"to":["peta@kapiki.co.nz"],"subject":"Test","body":"Test"},"auth":{"uid":"aaUawrkoZUZIz7ATCcrVmTVt68m1","token":{"iss":"https://securetoken.google.com/kapikiwebsite","aud":"kapikiwebsite","auth_time":1744030614,"user_id":"aaUawrkoZUZIz7ATCcrVmTVt68m1","sub":"aaUawrkoZUZIz7ATCcrVmTVt68m1","iat":1744040914,"exp":1744044514,"email":"peta@kapiki.co.nz","email_verified":false,"firebase":{"identities":{"email":["peta@kapiki.co.nz"]},"sign_in_provider":"password"},"uid":"aaUawrkoZUZIz7ATCcrVmTVt68m1"}},"headers":{"host":"localhost:5001","connection":"keep-alive","content-length":"68","sec-ch-ua-platform":"\"macOS\"","authorization":"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjcxMTE1MjM1YTZjNjE0NTRlZmRlZGM0NWE3N2U0MzUxMzY3ZWViZTAiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20va2FwaWtpd2Vic2l0ZSIsImF1ZCI6ImthcGlraXdlYnNpdGUiLCJhdXRoX3RpbWUiOjE3NDQwMzA2MTQsInVzZXJfaWQiOiJhYVVhd3Jrb1pVWkl6N0FUQ2NyVm1UVnQ2OG0xIiwic3ViIjoiYWFVYXdya29aVVpJejdBVENjclZtVFZ0NjhtMSIsImlhdCI6MTc0NDA0MDkxNCwiZXhwIjoxNzQ0MDQ0NTE0LCJlbWFpbCI6InBldGFAa2FwaWtpLmNvLm56IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbInBldGFAa2FwaWtpLmNvLm56Il19LCJzaWduX2luX3Byb3ZpZGVyIjoicGFzc3dvcmQifX0.mhrpP28rcGH6E19aZUOxOnX54NEKlHs1dM00nDX5HtDAwSh2H8rHutqxT1DpiY4bFWHwgZ4pTvj8anDJlA9mCN8znB9KMBe1T76uc5ZwsuYMvpd-FP3ctftVrsWfKAo6BN2E0ZwZSc6a7WFrkdBd7yJakmR4iClVviIpHtWDst3r_WYvyUtvg03WM1GOKD6nwoxndhfJDfI7eSE0iH34kb2xNxyzAmyWasTbvNC1S1QraxAYiNsq7mDvefuQDwKWvoXUtLyjGn850nAtrxqGEULR_HPwK7Yu5Z1lqJ017YvbIDMTDddoC_cwZXdj_Z4UrFrVB_GiUXN_E-ZH8Xlh8w","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36","sec-ch-ua":"\"Chromium\";v=\"134\", \"Not:A-Brand\";v=\"24\", \"Google Chrome\";v=\"134\"","content-type":"application/json","sec-ch-ua-mobile":"?0","accept":"*/*","origin":"http://localhost:3000","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:3000/","accept-encoding":"gzip, deflate, br, zstd","accept-language":"en-GB,en-US;q=0.9,en;q=0.8"},"origin":"http://localhost:3000","method":"POST","severity":"INFO","message":"Email function called"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"to\":[\"peta@kapiki.co.nz\"],\"subject\":\"Test\",\"body\":\"Test\"},\"auth\":{\"uid\":\"aaUawrkoZUZIz7ATCcrVmTVt68m1\",\"token\":{\"iss\":\"https://securetoken.google.com/kapikiwebsite\",\"aud\":\"kapikiwebsite\",\"auth_time\":1744030614,\"user_id\":\"aaUawrkoZUZIz7ATCcrVmTVt68m1\",\"sub\":\"aaUawrkoZUZIz7ATCcrVmTVt68m1\",\"iat\":1744040914,\"exp\":1744044514,\"email\":\"peta@kapiki.co.nz\",\"email_verified\":false,\"firebase\":{\"identities\":{\"email\":[\"peta@kapiki.co.nz\"]},\"sign_in_provider\":\"password\"},\"uid\":\"aaUawrkoZUZIz7ATCcrVmTVt68m1\"}},\"headers\":{\"host\":\"localhost:5001\",\"connection\":\"keep-alive\",\"content-length\":\"68\",\"sec-ch-ua-platform\":\"\\\"macOS\\\"\",\"authorization\":\"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjcxMTE1MjM1YTZjNjE0NTRlZmRlZGM0NWE3N2U0MzUxMzY3ZWViZTAiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20va2FwaWtpd2Vic2l0ZSIsImF1ZCI6ImthcGlraXdlYnNpdGUiLCJhdXRoX3RpbWUiOjE3NDQwMzA2MTQsInVzZXJfaWQiOiJhYVVhd3Jrb1pVWkl6N0FUQ2NyVm1UVnQ2OG0xIiwic3ViIjoiYWFVYXdya29aVVpJejdBVENjclZtVFZ0NjhtMSIsImlhdCI6MTc0NDA0MDkxNCwiZXhwIjoxNzQ0MDQ0NTE0LCJlbWFpbCI6InBldGFAa2FwaWtpLmNvLm56IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbInBldGFAa2FwaWtpLmNvLm56Il19LCJzaWduX2luX3Byb3ZpZGVyIjoicGFzc3dvcmQifX0.mhrpP28rcGH6E19aZUOxOnX54NEKlHs1dM00nDX5HtDAwSh2H8rHutqxT1DpiY4bFWHwgZ4pTvj8anDJlA9mCN8znB9KMBe1T76uc5ZwsuYMvpd-FP3ctftVrsWfKAo6BN2E0ZwZSc6a7WFrkdBd7yJakmR4iClVviIpHtWDst3r_WYvyUtvg03WM1GOKD6nwoxndhfJDfI7eSE0iH34kb2xNxyzAmyWasTbvNC1S1QraxAYiNsq7mDvefuQDwKWvoXUtLyjGn850nAtrxqGEULR_HPwK7Yu5Z1lqJ017YvbIDMTDddoC_cwZXdj_Z4UrFrVB_GiUXN_E-ZH8Xlh8w\",\"user-agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\",\"sec-ch-ua\":\"\\\"Chromium\\\";v=\\\"134\\\", \\\"Not:A-Brand\\\";v=\\\"24\\\", \\\"Google Chrome\\\";v=\\\"134\\\"\",\"content-type\":\"application/json\",\"sec-ch-ua-mobile\":\"?0\",\"accept\":\"*/*\",\"origin\":\"http://localhost:3000\",\"sec-fetch-site\":\"same-site\",\"sec-fetch-mode\":\"cors\",\"sec-fetch-dest\":\"empty\",\"referer\":\"http://localhost:3000/\",\"accept-encoding\":\"gzip, deflate, br, zstd\",\"accept-language\":\"en-GB,en-US;q=0.9,en;q=0.8\"},\"origin\":\"http://localhost:3000\",\"method\":\"POST\",\"severity\":\"INFO\",\"message\":\"Email function called\"}"}}
[info] >  {"to":["peta@kapiki.co.nz"],"subject":"Test","bodyLength":4,"auth":"aaUawrkoZUZIz7ATCcrVmTVt68m1","severity":"INFO","message":"Preparing to send email"} {"user":{"to":["peta@kapiki.co.nz"],"subject":"Test","bodyLength":4,"auth":"aaUawrkoZUZIz7ATCcrVmTVt68m1","severity":"INFO","message":"Preparing to send email"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"to\":[\"peta@kapiki.co.nz\"],\"subject\":\"Test\",\"bodyLength\":4,\"auth\":\"aaUawrkoZUZIz7ATCcrVmTVt68m1\",\"severity\":\"INFO\",\"message\":\"Preparing to send email\"}"}}
[info] >  {"severity":"INFO","message":"Sending email via Gmail API"} {"user":{"severity":"INFO","message":"Sending email via Gmail API"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Sending email via Gmail API\"}"}}
[warn] ⚠  Google API requested!
   - URL: "https://www.googleapis.com/oauth2/v4/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Google API requested!\n   - URL: \"https://www.googleapis.com/oauth2/v4/token\"\n   - Be careful, this may be a production service."}}
[warn] ⚠  Google API requested!
   - URL: "https://gmail.googleapis.com/gmail/v1/users/me/messages/send"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Google API requested!\n   - URL: \"https://gmail.googleapis.com/gmail/v1/users/me/messages/send\"\n   - Be careful, this may be a production service."}}
[info] >  {"response":{"config":{"url":"https://gmail.googleapis.com/gmail/v1/users/me/messages/send","method":"POST","userAgentDirectives":[{"product":"google-api-nodejs-client","version":"7.2.0","comment":"gzip"}],"data":{"raw":"VG86IHBldGFAa2FwaWtpLmNvLm56DQpGcm9tOiBraWFvcmFAa2FwaWtpLmNvLm56DQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD11dGYtOA0KTUlNRS1WZXJzaW9uOiAxLjANClN1YmplY3Q6IFRlc3QNCg0KVGVzdA"},"headers":{"x-goog-api-client":"gdcl/7.2.0 gl-node/20.14.0","Accept-Encoding":"gzip","User-Agent":"google-api-nodejs-client/7.2.0 (gzip)","Authorization":"Bearer ya29.a0AZYkNZghrjyTabrNsj2fwCrM3fa98dyHPkOmNG5eHlZGJmLnvzTgwDDmZ4ida18V0JO0_GUFQ5-Mujjp-9ThivpZBQQx-M67tJCv1EfwjQ2zBUvb4ynkWfGV0H-tWy_U7AVUpAS_b6giAjLPQcDM7KKpgAVQzFzZ4NeToH9gGVTmpU-m7f-BqWzNEXyl-ny_2lRKlbAOWvpziIrFLofGb0ziaCgYKARkSARISFQHGX2MiNN2kNUR3oO6alnblomD-og0223","Content-Type":"application/json"},"params":{},"retry":true,"body":"{\"raw\":\"VG86IHBldGFAa2FwaWtpLmNvLm56DQpGcm9tOiBraWFvcmFAa2FwaWtpLmNvLm56DQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD11dGYtOA0KTUlNRS1WZXJzaW9uOiAxLjANClN1YmplY3Q6IFRlc3QNCg0KVGVzdA\"}","responseType":"unknown"},"data":{"id":"196110d2b155a961","threadId":"196110d2b155a961","labelIds":["SENT"]},"headers":{"alt-svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","content-encoding":"gzip","content-type":"application/json; charset=UTF-8","date":"Mon, 07 Apr 2025 16:19:57 GMT","server":"ESF","transfer-encoding":"chunked","vary":"Origin, X-Origin, Referer","x-content-type-options":"nosniff","x-frame-options":"SAMEORIGIN","x-xss-protection":"0"},"status":200,"statusText":"OK","request":{"responseURL":"https://gmail.googleapis.com/gmail/v1/users/me/messages/send"}},"messageId":"196110d2b155a961","severity":"INFO","message":"Email sent successfully"} {"user":{"response":{"config":{"url":"https://gmail.googleapis.com/gmail/v1/users/me/messages/send","method":"POST","userAgentDirectives":[{"product":"google-api-nodejs-client","version":"7.2.0","comment":"gzip"}],"data":{"raw":"VG86IHBldGFAa2FwaWtpLmNvLm56DQpGcm9tOiBraWFvcmFAa2FwaWtpLmNvLm56DQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD11dGYtOA0KTUlNRS1WZXJzaW9uOiAxLjANClN1YmplY3Q6IFRlc3QNCg0KVGVzdA"},"headers":{"x-goog-api-client":"gdcl/7.2.0 gl-node/20.14.0","Accept-Encoding":"gzip","User-Agent":"google-api-nodejs-client/7.2.0 (gzip)","Authorization":"Bearer ya29.a0AZYkNZghrjyTabrNsj2fwCrM3fa98dyHPkOmNG5eHlZGJmLnvzTgwDDmZ4ida18V0JO0_GUFQ5-Mujjp-9ThivpZBQQx-M67tJCv1EfwjQ2zBUvb4ynkWfGV0H-tWy_U7AVUpAS_b6giAjLPQcDM7KKpgAVQzFzZ4NeToH9gGVTmpU-m7f-BqWzNEXyl-ny_2lRKlbAOWvpziIrFLofGb0ziaCgYKARkSARISFQHGX2MiNN2kNUR3oO6alnblomD-og0223","Content-Type":"application/json"},"params":{},"retry":true,"body":"{\"raw\":\"VG86IHBldGFAa2FwaWtpLmNvLm56DQpGcm9tOiBraWFvcmFAa2FwaWtpLmNvLm56DQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD11dGYtOA0KTUlNRS1WZXJzaW9uOiAxLjANClN1YmplY3Q6IFRlc3QNCg0KVGVzdA\"}","responseType":"unknown"},"data":{"id":"196110d2b155a961","threadId":"196110d2b155a961","labelIds":["SENT"]},"headers":{"alt-svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","content-encoding":"gzip","content-type":"application/json; charset=UTF-8","date":"Mon, 07 Apr 2025 16:19:57 GMT","server":"ESF","transfer-encoding":"chunked","vary":"Origin, X-Origin, Referer","x-content-type-options":"nosniff","x-frame-options":"SAMEORIGIN","x-xss-protection":"0"},"status":200,"statusText":"OK","request":{"responseURL":"https://gmail.googleapis.com/gmail/v1/users/me/messages/send"}},"messageId":"196110d2b155a961","severity":"INFO","message":"Email sent successfully"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"response\":{\"config\":{\"url\":\"https://gmail.googleapis.com/gmail/v1/users/me/messages/send\",\"method\":\"POST\",\"userAgentDirectives\":[{\"product\":\"google-api-nodejs-client\",\"version\":\"7.2.0\",\"comment\":\"gzip\"}],\"data\":{\"raw\":\"VG86IHBldGFAa2FwaWtpLmNvLm56DQpGcm9tOiBraWFvcmFAa2FwaWtpLmNvLm56DQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD11dGYtOA0KTUlNRS1WZXJzaW9uOiAxLjANClN1YmplY3Q6IFRlc3QNCg0KVGVzdA\"},\"headers\":{\"x-goog-api-client\":\"gdcl/7.2.0 gl-node/20.14.0\",\"Accept-Encoding\":\"gzip\",\"User-Agent\":\"google-api-nodejs-client/7.2.0 (gzip)\",\"Authorization\":\"Bearer ya29.a0AZYkNZghrjyTabrNsj2fwCrM3fa98dyHPkOmNG5eHlZGJmLnvzTgwDDmZ4ida18V0JO0_GUFQ5-Mujjp-9ThivpZBQQx-M67tJCv1EfwjQ2zBUvb4ynkWfGV0H-tWy_U7AVUpAS_b6giAjLPQcDM7KKpgAVQzFzZ4NeToH9gGVTmpU-m7f-BqWzNEXyl-ny_2lRKlbAOWvpziIrFLofGb0ziaCgYKARkSARISFQHGX2MiNN2kNUR3oO6alnblomD-og0223\",\"Content-Type\":\"application/json\"},\"params\":{},\"retry\":true,\"body\":\"{\\\"raw\\\":\\\"VG86IHBldGFAa2FwaWtpLmNvLm56DQpGcm9tOiBraWFvcmFAa2FwaWtpLmNvLm56DQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD11dGYtOA0KTUlNRS1WZXJzaW9uOiAxLjANClN1YmplY3Q6IFRlc3QNCg0KVGVzdA\\\"}\",\"responseType\":\"unknown\"},\"data\":{\"id\":\"196110d2b155a961\",\"threadId\":\"196110d2b155a961\",\"labelIds\":[\"SENT\"]},\"headers\":{\"alt-svc\":\"h3=\\\":443\\\"; ma=2592000,h3-29=\\\":443\\\"; ma=2592000\",\"content-encoding\":\"gzip\",\"content-type\":\"application/json; charset=UTF-8\",\"date\":\"Mon, 07 Apr 2025 16:19:57 GMT\",\"server\":\"ESF\",\"transfer-encoding\":\"chunked\",\"vary\":\"Origin, X-Origin, Referer\",\"x-content-type-options\":\"nosniff\",\"x-frame-options\":\"SAMEORIGIN\",\"x-xss-protection\":\"0\"},\"status\":200,\"statusText\":\"OK\",\"request\":{\"responseURL\":\"https://gmail.googleapis.com/gmail/v1/users/me/messages/send\"}},\"messageId\":\"196110d2b155a961\",\"severity\":\"INFO\",\"message\":\"Email sent successfully\"}"}}
[debug] [2025-04-07T16:19:57.971Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sendEmail" in 1033.982416ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finished \"us-central1-sendEmail\" in 1033.982416ms"}}
[debug] [2025-04-07T16:19:57.971Z] [worker-us-central1-sendEmail-e4b3fdb6-6fd6-4269-b2b0-04323f101e44]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"[worker-us-central1-sendEmail-e4b3fdb6-6fd6-4269-b2b0-04323f101e44]: IDLE"}}
[debug] [2025-04-07T16:19:57.971Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-07T16:19:57.971Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sendEmail"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-07T16:19:57.971Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
